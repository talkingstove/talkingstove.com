!function(){!function(t,n){"object"==typeof exports?module.exports=n(this):"function"==typeof define&&define.amd?define(function(){return n(t)}):t.Fiber=n(t)}(this,function(t){function n(t,n){var o;for(o in t)t.hasOwnProperty(o)&&(n[o]=t[o])}function o(){}var e=!1,i=Array.prototype,r=t.Fiber;return o.extend=function(t){function i(){e||(this.init.apply(this,arguments),this.init=void 0)}var r,c=this.prototype,f=t(c);return e=!0,r=i.prototype=new this,e=!1,r.init=function(){"function"==typeof c.init&&c.init.apply(this,arguments)},n(f,r),r.constructor=i,i.__base__=c,i.extend=i.prototype.extend||o.extend,i},o.proxy=function(t,n){var o,e,i={};1===arguments.length&&(n=t,t=n.constructor.__base__),e=function(o){return function(){return t[o].apply(n,arguments)}};for(o in t)t.hasOwnProperty(o)&&"function"==typeof t[o]&&(i[o]=e(o));return i},o.decorate=function(t){var o,e=t.constructor.__base__,r=i.slice.call(arguments,1),c=r.length;for(o=0;o<c;o++)n(r[o].call(t,e),t)},o.mixin=function(t){var o,e=t.__base__,r=i.slice.call(arguments,1),c=r.length;for(o=0;o<c;o++)n(r[o](e),t.prototype)},o.noConflict=function(){return t.Fiber=r,o},o})}();
window.N=window.N||{},Nagisa=N,N.Ajax=N.Ajax||{},N.Ajax.makeAjaxCall=function(e){var a=e.type,n=e.url,l=e.dataTypeReturned||"json",r=e.successHandler||null,t=e.afterSuccessCallback||null,o=e.doneCallback||null,s=e.errorHandler||N.defaultAjaxErrorHandler,d=e.dataToSend||{},u=e.jsonToHtmlHandlers||null,c=e.dataAgreements||null;$.ajax({type:a,url:n,dataType:l,data:d}).success(function(e){if(c&&c.length){var a=[];if(_.each(c,function(n){var l=N.Agreements.testAgreement(n,e).doesAgreementPass;l||a.push(n.name)}),a.length)return void console.error("Agreements failed on JSON call!");console.log("All agreements passed!")}if(r&&r(e),u)for(var n=0;n<u.length;n++)u[n].execute(e);t&&t(e)}).error(function(){s()}).done(function(){o&&o()})};
window.N=window.N||{},Nagisa=N,N.defaultTemplateLanguage="underscore",_.templateSettings={interpolate:/\{\*\=(.+?)\*\}/g,evaluate:/\{\*(.+?)\*\}/g},N.defaultAjaxErrorHandler=function(){console.log("An error occurred while making an Ajax call")},N.Classes=N.Classes||{},N.Classes.NBase=Fiber.extend(function(e){return{init:function(e){console.log("NBASE with params:",e)},log:function(e){console.log(e)}}}),N.Library=N.Library||{},N.Library.Models=N.Library.Models||{},N.Classes.NModel=N.Classes.NBase.extend(function(e){return{init:function(t){e.init(t),console.log("NEW model:",t),t.name?N.Library.Models[t.name]?console.warn("Model with this name already exists... would be overwritten"):N.Library.Models[t.name]=this:console.warn("Model needs a name"),this.bindings=t.bindings||{}},set:function(e,t,n){this[e]=t,n=n||!1,this.bindings[e]?n||this.bindings[e].selector&&$(this.bindings[e].selector).val(t):this.bindings[e]={}},get:function(e){return this[e]},createBinding:function(e,t){var n=this;this.bindings[e]||(this.bindings[e]={}),this.bindings[e].selector=t,$(t).on("change",function(){n.set(e,$(t).val(),!0)})}}}),N.Classes.NView=N.Classes.NBase.extend(function(e){return{init:function(t){e.init(t),console.log("NEW view:",t),this.$templateSelector=t.$templateSelector,this.$childTemplateSelector=t.$childTemplateSelector},renderView:function(e){}}}),N.Classes.JSONToHtmlDemo=N.Classes.NView.extend(function(e){return{init:function(t){e.init(t),console.log("NEW N.Classes.JSONToHtmlDemo:",t),this.$templateSelector="test_json_template_parent",this.$childTemplateSelector="test_json_template",this.dataSource=t.dataSource,this.$domTarget=t.$domTarget},renderView:function(){var e=this,t="";_.each(this.dataSource,function(n){t+=N.compileTemplate(e.$childTemplateSelector,n)});var n=N.compileTemplate(this.$templateSelector,{listContents:t});this.$domTarget.html(n)}}});
window.N=window.N||{},Nagisa=N,N.JsonToHtmlHandler=function(t){this.dataPath=t.dataPath||null,this.domTarget=t.domTarget,this.templateName=t.templateName,this.customJsonHandler=t.customJsonHandler||null,this.afterCompleteCallback=t.afterCompleteCallback||null,this.contentPosition=t.contentPosition||"append",this.viewClass=t.viewClass||null},N.JsonToHtmlHandler.prototype.execute=function(t){var e,a="";e=this.dataPath?N.Utils.findObjectAttributeByName(t,this.dataPath):t,this.customJsonHandler&&(e=customJsonHandler(e));var o="body"==this.domTarget?$("body"):$("#"+this.domTarget);if(this.viewClass){var n=new this.viewClass({dataSource:e,$domTarget:o});n.renderView()}else{for(var s=0;s<e.length;s++){var i=e[s],l=N.compileTemplate(this.templateName,i);a+=l}"append"==this.contentPosition?o.append(a):"prepend"==this.contentPosition?o.prepend(a):"replace"==this.contentPosition&&o.html(a)}this.afterCompleteCallback&&this.afterCompleteCallback()};
window.N=window.N||{},Nagisa=N,N.Library.referenceLibrary=[],N.Library.lookUpReferenceById=function(r){for(var e=0;e<N.Library.referenceLibrary.length;e++)if(N.Library.referenceLibrary[e].id==r)return N.Library.referenceLibrary[e];return null},N.Library.listAllReferences=function(){},N.Library.createReference=function(r,e,i,n){if(null!=N.Library.lookUpReferenceById(r))return console.warn("Library object with id "+r+" already exists!"),!1;var i=i||"No description provided for this class.";return e.id=r,e.description=i,N.Library.referenceLibrary.push(e),"function"==typeof e.init&&e.init(),!0};
window.N=window.N||{},Nagisa=N,N.Library=N.Library||{},N.version=.01,N.author="Ryan Moore";
window.N=window.N||{},Nagisa=N,N.Utils=N.Utils||{},N.Agreements=N.Agreements||{},N.Agreements.Library={sample_data_agreement:{objectRoot:{path:"items",dataType:"array",dataItemStructure:{id:"number",name:"string",image:"string",mock:{alpha:"array",beta:"number",gamma:"string"}}}}},N.Agreements.testAgreement=function(e,t){function a(e,t,n){_.each(t,function(t,o){if(_.isObject(t)){if(!e[o])return void r.push("Bad structure: cant find subobject "+o);a(e[o],t,n)}else{var s=N.Utils.testDataType(e[o],t);s||r.push("Bad structure: "+e[o]+" was expected to be: "+t+" in tested item "+n)}})}var r=[],n=N.Utils.findObjectAttributeByName(t,e.objectRoot.path),o=N.Utils.testDataType(n,e.objectRoot.dataType);if(_.isUndefined(n)||!o)return r.push("Root object not found at path"+e.objectRoot.path+"or wrong data type"),{doesAgreementPass:!r.length,failureMessages:r};if("array"===e.objectRoot.dataType||"object"===e.objectRoot.dataType){var s=0;_.each(n,function(t){a(t,e.objectRoot.dataItemStructure,s),s++})}return console.log("failures:",r),{doesAgreementPass:!r.length,failureMessages:r}},N.Utils.testDataType=function(e,t){switch(t){case"string":return _.isString(e);case"array":return _.isArray(e);case"object":return _.isObject(e);case"number":return _.isNumber(e)}},N.compileTemplate=function(e,t,a,r){var r=r||N.defaultTemplateLanguage,t=t||null;try{if("underscore"==r)if(t)var n=_.template($("#"+e).html(),t);else var n=_.template($("#"+e).html());else if("jquery_tmpl"==r&&t)var n=$.tmpl($("#"+e).html(),t);return n}catch(r){console.log("the following template error occurred",r),console.log("error compiling template named:",e,"with data:",t,"called from method: ",a)}},N.Utils.findObjectAttributeByName=function(e,t){for(var a=t.split("."),r=e,n=0;n<a.length;n++){if("undefined"==typeof r[a[n]]){r=null;break}r=r[a[n]]}return r};
